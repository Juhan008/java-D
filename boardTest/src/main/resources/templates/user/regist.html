<html mxlns:th="http://www.thymeleaf.org">
  <head th:fragment="registFragmentHead">
    <link rel="stylesheet" href="/styles/user/regist.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker.min.css"
      integrity="sha512-34s5cpvaNG3BknEWSuOncX28vz97bRI59UnVtEEpFX536A7BtZSJHsDyFoCl8S7Dt2TPzcrCEoHBGeM4SUBDBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker.standalone.min.css"
      integrity="sha512-D5/oUZrMTZE/y4ldsD6UOeuPR4lwjLnfNMWkjC0pffPTCVlqzcHTNvkn3dhL7C0gYifHQJAIrRTASbMvLmpEug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker3.min.css"
      integrity="sha512-aQb0/doxDGrw/OC7drNaJQkIKFu6eSWnVMAwPN64p6sZKeJ4QCDYL42Rumw2ZtL8DB9f66q4CnLIUnAw28dEbg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker3.standalone.min.css"
      integrity="sha512-t+00JqxGbnKSfg/4We7ulJjd3fGJWsleNNBSXRk9/3417ojFqSmkBfAJ/3+zpTFfGNZyKxPVGwWvaRuGdtpEEA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js"
      integrity="sha512-LsnSViqQyaXpD4mBBdRYeP6sRwJiJveh2ZIbW41EBrNmKxgr/LFZIiWT6yr+nycvhvauz8c2nYMhrP80YhG7Cw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/locales/bootstrap-datepicker.ko.min.js"
      integrity="sha512-L4qpL1ZotXZLLe8Oo0ZyHrj/SweV7CieswUODAAPN/tnqN3PA1P+4qPu5vIryNor6HQ5o22NujIcAZIfyVXwbQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <div th:fragment="registFragment" class="container">
      <form id="registForm" action="/user/regist" method="post" class="row">
        <div class="input-group mb-3">
          <span class="input-group-text" id="user-id">ID</span>
          <input
            type="text"
            class="form-control"
            placeholder="3~20자의 영문자과 숫자"
            aria-label="user-id"
            aria-describedby="user-id"
            name="userId"
          />
          <span class="input-group-text" id="password">PW</span>
          <input
            type="password"
            class="form-control"
            placeholder="10~30자의 대소문자, 숫자, 특수문자(!@#$%^&)를 포함"
            aria-label="password"
            aria-describedby="password"
            name="password"
          />
        </div>
        <div class="input-group mb-3">
          <span class="input-group-text" id="name">Name</span>
          <input
            type="text"
            class="form-control"
            placeholder="2~10자의 한글 또는 4~20자의 영어"
            aria-label="name"
            aria-describedby="name"
            id="name"
            name="name"
          />
        </div>
        <div class="input-group mb-3">
          <span class="input-group-text" id="phone">Phone</span>
          <input
            type="text"
            class="form-control"
            placeholder=""-"를 포함하여 12~13자리 또는 "-"를 제외한 10~11자리"
            aria-label="phone"
            aria-describedby="phone"
            id="phone"
            name="phone"
          />
        </div>
        <div class="input-group mb-3">
          <span class="input-group-text" id="address">Address</span>
          <input
            type="text"
            class="form-control"
            placeholder="5~100자"
            aria-label="address"
            aria-describedby="address"
            id="address"
            name="address"
          />
        </div>
        <div class="input-group mb-3">
          <span class="input-group-text" id="email">E-Mail</span>
          <input
            type="email"
            class="form-control"
            placeholder="example@gmail.com/org/co.kr/net"
            aria-label="email"
            aria-describedby="email"
            id="email"
            name="email"
          />
        </div>
        <div class="input-group mb-3">
          <span class="input-group-text" id="git-address">Github Address</span>
          <input
            type="text"
            class="form-control"
            placeholder="https://github.com/example"
            aria-label="git-address"
            aria-describedby="git-address"
            id="git-address"
            name="gitAddress"
          />
        </div>

        <div class="input-group mb-3">
          <div class="input-group-text">
            <input
              type="radio"
              class="form-check-input mt-0"
              value="1"
              aria-label="gender"
              id="gender-male"
              name="gender"
            />
          </div>
          <label for="gender-male" class="form-control">Male</label>
          <div class="input-group-text">
            <input
              type="radio"
              class="form-check-input mt-0"
              value="2"
              aria-label="gender"
              id="gender-female"
              name="gender"
            />
          </div>
          <label for="gender-female" class="form-control">Female</label>
        </div>
        <div class="input-group mb-3">
          <span class="input-group-text" id="birth">Birth Day</span>
          <input
            type="text"
            class="form-control"
            aria-label="birth"
            aria-describedby="birth"
            id="datePicker"
            name="birth"
            autocomplete="off"
          />
        </div>

        <!-- <div class="input-group mb-3">
          <span class="input-group-text" id="birth">Birth Day</span>
          <input
            type="date"
            class="form-control"
            aria-label="birth"
            aria-describedby="birth"
            id="birth"
            name="birth"
          />
        </div> -->
        <div class="input-group">
          <button class="btn btn-primary btn-lg m-auto">Sign in</button>
        </div>
      </form>
      <div id="errorModal" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">회원 정보</h5>
      </div>
      <div class="modal-body">
        <p id="errorMessage"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div> 	
      <script>
		  document.getElementById('registForm').addEventListener('submit', function(event) {
		    var userId = document.forms["registForm"]["userId"].value;
		    var password = document.forms["registForm"]["password"].value;
		   	var name = document.forms["registForm"]["name"].value;
			var phoneNumber = document.forms["registForm"]["phone"].value;
			var address = document.forms["registForm"]["address"].value;
			var email = document.forms["registForm"]["email"].value;
			var gitAddress = document.forms["registForm"]["gitAddress"].value;
		
		    var errorMessage = '';
		    if(!/^[a-zA-Z0-9]{3,20}$/.test(userId)) {
		      errorMessage = 'ID는 3~20자의 영문자과 숫자여야 합니다.';
		    }
		    if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&])[A-Za-z\d!@#$%^&]{10,30}$/.test(password)) {
		      errorMessage = '비밀번호는 10~30자의 대소문자, 숫자, 특수문자(!@#$%^&)를 포함해야 합니다.';
		    }
		    if(errorMessage) {
		      document.getElementById('errorMessage').innerText = errorMessage;
		      $('#errorModal').modal('show');
		      event.preventDefault();
		      return false;
		    }
		    if(!/^([가-힣]{2,10}|[A-Za-z]{4,20})$/.test(name)) {
		    errorMessage = '이름은 2~10자의 한글 또는 4~20자의 영어여야 합니다.';
			}
		    if(!/^(\d{1,3}-\d{1,4}-\d{4})$/.test(phoneNumber) && !/^(\d{10,11})$/.test(phoneNumber)) {
		    errorMessage = '전화번호는 "-"를 포함하여 12~13자리 또는 "-"를 제외한 10~11자리여야 합니다.';
	    	}
		    if(address.length < 5 || address.length > 100) {
		    errorMessage = '주소는 5~100자 사이여야 합니다.';
		    }
		    if(!/^.+@(?:.+\.com|.+\.org|.+\.co\.kr|.+\.net)$/.test(email)) {
		    errorMessage = '이메일은 "@"를 포함해야 하며, .com, .org, .co.kr, .net 으로 종료되어야 합니다.. ';
		    }
		    if(gitAddress && !gitAddress.startsWith('https://github.com/')) {
		    document.forms["registrationForm"]["gitAddress"].value = 'https://github.com/' + gitAddress;
		    }
		    if(errorMessage) {
		    document.getElementById('errorMessage').innerText = errorMessage;
		    $('#errorModal').modal('show');
		    event.preventDefault();
		    return false;
		    }
	        return true;
			});
	</script>
      <script>
        $("#datePicker").datepicker({
          format: "yyyy-mm-dd",
          //   startDate: "-1d",
          endDate: "1d",
          autoclose: true,
          clearBtn: true,
          title: "Birth day",
          language: "ko",
          //   multidate: true,
        });
      </script>
    </div>
  </body>
</html>
